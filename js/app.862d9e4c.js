(function(e){function t(t){for(var o,a,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)a=s[d],i[a]&&p.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"17be":function(e,t,n){e.exports=n.p+"img/logo.f0508f10.jpg"},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("div",{attrs:{id:"app"}},[e._m(0),n("section",{attrs:{id:"thumbnails"}},e._l(e.videoSourceState,function(t,o){return n("article",{key:o},[n("router-link",{staticClass:"thumbnail",attrs:{to:"/episode"+t.episode,"data-id":t.episode},nativeOn:{click:function(t){return e.actionPlay(t)}}},[n("img",{attrs:{src:t.poster,alt:""}}),n("h3",[e._v("Серия "+e._s(t.episode))])])],1)}),0),e._m(1)]),n("router-view")],1)},r=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("header",{attrs:{id:"header"}},[o("img",{staticClass:"logo",attrs:{src:n("17be"),alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{attrs:{id:"footer"}},[n("ul",{staticClass:"copyright"},[n("li",[e._v("©")]),n("li",[n("a",{attrs:{href:"https://vladimirdorogov.com",target:"_blank"}},[e._v("Vladimir dorogov")])])])])}],a=(n("96cf"),n("3b8d")),s=n("d225"),c=n("b0b4"),u=n("308d"),l=n("6bb5"),d=n("4e2b"),p=n("9ab4"),v=(n("ac6a"),n("7514"),function(e){"loading"!==document.readyState?e():document.addEventListener&&document.addEventListener("DOMContentLoaded",e)});var f=n("60a3"),h=function(e){function t(){return Object(s["a"])(this,t),Object(u["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),t}(f["c"]);h=p["a"]([f["a"]],h);var m=new h,b=function(e){var t={settings:{preload:!1,slideDuration:500,layoutDuration:750,thumbnailsPerRow:2,mainSide:"right"},$window:null,$body:null,$main:null,$thumbnails:null,$viewer:null,$toggle:null,$navNext:null,$navPrevious:null,slides:[],current:null,locked:!1,keys:{27:function(){t.toggle()},38:function(){t.up()},40:function(){t.down()},32:function(){t.next()},39:function(){t.next()},37:function(){t.previous()}},initProperties:function(){t.$window=e(window),t.$body=e("body"),t.$thumbnails=e("#thumbnails"),t.$viewer=e('<div id="viewer"><div class="inner"><div class="toggle"></div></div></div>').appendTo(t.$body),t.$navNext=t.$viewer.find(".nav-next"),t.$navPrevious=t.$viewer.find(".nav-previous"),t.$main=e("#main"),e('<div class="toggle"></div>').appendTo(t.$main),t.$toggle=e(".toggle")},initEvents:function(){var e;v(function(){t.$body.removeClass("is-preload-0"),window.setTimeout(function(){t.$body.removeClass("is-preload-1")},100),window.setTimeout(function(){t.$body.removeClass("is-preload-2")},100+Math.max(t.settings.layoutDuration-150,0))}),t.$window.on("resize",function(){t.$body.addClass("is-preload-0"),window.clearTimeout(e),e=window.setTimeout(function(){t.$body.removeClass("is-preload-0")},100)}),t.$viewer.on("touchend",function(){breakpoints.active("<=medium")&&t.hide()}),t.$viewer.on("touchstart",function(e){t.$viewer.touchPosX=e.originalEvent.touches[0].pageX,t.$viewer.touchPosY=e.originalEvent.touches[0].pageY}).on("touchmove",function(e){if(null!==t.$viewer.touchPosX&&null!==t.$viewer.touchPosY){var n=t.$viewer.touchPosX-e.originalEvent.touches[0].pageX,o=t.$viewer.touchPosY-e.originalEvent.touches[0].pageY,i=20,r=50;o<i&&o>-1*i&&n>r?t.next():o<i&&o>-1*i&&n<-1*r&&t.previous();var a=t.$viewer.outerHeight(),s=t.$viewer.get(0).scrollHeight-t.$viewer.scrollTop();(t.$viewer.scrollTop()<=0&&o<0||s>a-2&&s<a+2&&o>0)&&(e.preventDefault(),e.stopPropagation())}}),t.$main.on("touchstart",function(e){breakpoints.active("<=xsmall")||(t.$main.touchPosX=e.originalEvent.touches[0].pageX,t.$main.touchPosY=e.originalEvent.touches[0].pageY)}).on("touchmove",function(e){if(!breakpoints.active("<=xsmall")&&null!==t.$main.touchPosX&&null!==t.$main.touchPosY){var n=t.$main.touchPosX-e.originalEvent.touches[0].pageX,o=t.$main.touchPosY-e.originalEvent.touches[0].pageY,i=20,r=50,a=!1;switch(t.settings.mainSide){case"left":a=o<i&&o>-1*i&&n>r;break;case"right":a=o<i&&o>-1*i&&n<-1*r;break;default:break}a&&t.hide();t.$main.outerHeight(),t.$main.get(0).scrollHeight,t.$main.scrollTop();t.$main.scrollTop()}}),t.$toggle.on("click",function(){t.toggle()}),t.$toggle.on("touchend",function(e){e.stopPropagation()}),t.$navNext.on("click",function(){t.next()}),t.$navPrevious.on("click",function(){t.previous()}),t.$body.on("keydown","input,select,textarea",function(e){e.stopPropagation()}),t.$window.on("keydown",function(e){breakpoints.active("<=xsmall")||e.keyCode in t.keys&&(e.stopPropagation(),e.preventDefault(),t.keys[e.keyCode]())})},initViewer:function(){},init:function(){breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:[null,"480px"]}),t.initProperties(),t.initViewer(),t.initEvents(),breakpoints.on(">xsmall",function(){null===t.current&&t.switchTo(0,!0)})},switchTo:function(e,t){},next:function(){var e,n=t.current,o=t.slides.length;e=n>=o-1?0:n+1,t.switchTo(e)},previous:function(){var e,n=t.current,o=t.slides.length;e=n<=0?o-1:n-1,t.switchTo(e)},up:function(){if(!t.$body.hasClass("fullscreen")){var e,n=t.current,o=t.slides.length,i=t.settings.thumbnailsPerRow;e=n<=i-1?o-(i-1-n)-1:n-i,t.switchTo(e)}},down:function(){if(!t.$body.hasClass("fullscreen")){var e,n=t.current,o=t.slides.length,i=t.settings.thumbnailsPerRow;e=n>=o-i?n-o+i:n+i,t.switchTo(e)}},show:function(){m.$emit("actionClose"),t.$body.hasClass("fullscreen")&&(t.$body.removeClass("fullscreen"),t.$main.focus())},hide:function(){t.$body.hasClass("fullscreen")||(t.$body.addClass("fullscreen"),t.$main.blur())},toggle:function(){t.$body.hasClass("fullscreen")?t.show():t.hide()}};return t}(jQuery),g=n("4bb5"),y=n("c6c6"),w=n.n(y),$=new w.a(window.navigator.userAgent),x=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(u["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.endpoint="https://api.chernobyl.download:3000",e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return $.phone()&&(t=document.querySelector("body"),t.classList.add("mobile")),e.next=3,this.getVideoSources(this.endpoint);case 3:b.init();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"actionPlay",value:function(){m.$emit("actionPlay")}}]),t}(f["c"]);p["a"]([Object(g["b"])("videoSources")],x.prototype,"videoSourceState",void 0),p["a"]([Object(g["a"])("getSources")],x.prototype,"getVideoSources",void 0),x=p["a"]([f["a"]],x);var k=x,S=k,P=n("2877"),C=Object(P["a"])(S,i,r,!1,null,null,null),O=C.exports,j=n("8c4f"),_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},T=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"viewer"}},[n("div",{staticClass:"inner"},[n("div",{staticClass:"toggle"})]),n("div",{staticClass:"slide active"},[n("video",{attrs:{id:"player"}})])])}],E=(n("c5f6"),n("78f6"),n("4fb8")),D=new w.a(window.navigator.userAgent),M=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(u["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.stream={},e.defaultTitle="Чернобыль",e.isMobileDevice=!1,e.playerControlsDesktop=["play-large","play","progress","current-time","duration","mute","volume","captions","settings","pip","airplay","download","fullscreen"],e.playerControlsMobile=["play-large","play","progress","current-time","duration","settings","fullscreen"],e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){var e=this;m.$on("actionPlay",function(){e.onUrlChange(e.$route)}),m.$on("actionClose",function(){e.onClose()}),D.phone()&&(this.isMobileDevice=!0),this.$store.subscribe(function(t){var n=t.type;"setSources"===n&&e.playerInit(e.videoSourceState[e.$route.meta])})}},{key:"onClose",value:function(){this.isMobileDevice&&window.innerHeight>window.innerWidth&&this.player.stop()}},{key:"onUrlChange",value:function(e){this.currentStream=this.videoSourceState[e.meta],this.playerChangeSource()}},{key:"playerInit",value:function(e){var t=this.playerControlsDesktop;!0===this.isMobileDevice&&(t=this.playerControlsMobile),this.player=new E("#player",{title:"Example title",urls:{download:e.download},controls:t}),this.player.source={type:"video",title:"Example title",sources:[{src:e["720"],type:"video/webm",size:720},{src:e["1080"],type:"video/webm",size:1080}],poster:e.poster},document.title="«".concat(e.title,"» - ").concat(this.defaultTitle),window.player=this.player}},{key:"playerChangeSource",value:function(){if(this.isMobileDevice){var e=document.querySelector("body");e.classList.add("fullscreen")}this.player.source={type:"video",title:"Example title",sources:[{src:this.stream["480"],type:"video/webm",size:480},{src:this.stream["720"],type:"video/webm",size:720},{src:this.stream["1080"],type:"video/webm",size:1080}],poster:this.stream.poster},this.player.config.urls.download=this.stream.download,document.title="«".concat(this.stream.title,"» - ").concat(this.defaultTitle)}},{key:"currentStream",get:function(){return this.stream},set:function(e){this.stream=e}}]),t}(f["c"]);p["a"]([Object(f["b"])(Number)],M.prototype,"episode",void 0),p["a"]([Object(g["b"])("videoSources")],M.prototype,"videoSourceState",void 0),M=p["a"]([f["a"]],M);var X=M,Y=X,R=Object(P["a"])(Y,_,T,!1,null,null,null),z=R.exports;o["a"].use(j["a"]);var H=new j["a"]({mode:"history",routes:[{path:"/",redirect:"/episode1"},{path:"/episode1",name:"episode1",component:z,props:{episode:1},meta:"0"},{path:"/episode2",name:"episode2",component:z,props:{episode:2},meta:"1"},{path:"/episode3",name:"episode3",component:z,props:{episode:3},meta:"2"},{path:"/episode4",name:"episode4",component:z,props:{episode:4},meta:"3"},{path:"/episode5",name:"episode5",component:z,props:{episode:5},meta:"4"}]}),L=n("2f62"),V=n("bc3a"),N=n.n(V);o["a"].use(L["a"]);var I={state:{videoSources:[],server:""},mutations:{setServer:function(e,t){e.server=t},setSources:function(e,t){e.videoSources=t}},actions:{getSources:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.commit,e.next=3,N.a.get(n);case 3:i=e.sent,o("setSources",i.data.videoSources),o("setServer",i.data.server);case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()}},q=new L["a"].Store(I);o["a"].config.productionTip=!1,window.vueInstance=new o["a"]({router:H,store:q,render:function(e){return e(O)}}).$mount("#main")}});
//# sourceMappingURL=app.862d9e4c.js.map